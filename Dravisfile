FROM debian:jessie
MAINTAINER http://sitch.io

# Tests the availability of GeoIP DB

WORKDIR /var/mmdb/
wget http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.mmdb.gz
gunzip ./GeoLite2-City.mmdb.gz

# This is just to regularly test the package version pins

COPY apt-install /apt-install
COPY requirements.txt /requirements.txt

RUN apt-get update && \
    apt-get install \
        -y \
        --no-install-recommends \
        `cat /apt-install`

RUN pip install -r /requirements.txt
